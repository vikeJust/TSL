<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Race Timer — Login</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <div style="grid-column:1/-1" class="header">
      <div class="brand">
        <div class="logo">RT</div>
        <div>
          <h1>Race Timer — Login</h1>
          <div class="small">Enter credentials to access Admin or Viewer</div>
        </div>
      </div>
    </div>

    <div style="grid-column:1/-1" class="center">
      <div class="card login-card">
        <h3 style="margin-top:0">Sign in</h3>
        <div class="small">Use the correct password for Admin or Viewer</div>
        <div style="height:12px"></div>
        <div class="form-row">
          <select id="roleSelect" class="input">
            <option value="viewer">Viewer</option>
            <option value="admin">Admin</option>
          </select>
        </div>
        <div class="form-row">
          <input id="passwordInput" class="input" type="password" placeholder="Password" />
        </div>
        <div class="form-row">
          <button id="loginBtn" class="btn">Login</button>
        </div>
        <div style="height:8px"></div>
        <div id="msg" class="small" style="color:#ffb3b3"></div>
        <div style="height:8px"></div>
      </div>
    </div>
  </div>

  <script>
    // Simple client-side password check (Option A)
    const PASSWORDS = { admin: 'admin123', viewer: 'user123' };

    function goto(path){
      window.location.href = path;
    }

    document.getElementById('loginBtn').addEventListener('click', ()=>{
      const role = document.getElementById('roleSelect').value;
      const pwd = document.getElementById('passwordInput').value;
      if(pwd === PASSWORDS[role]){
        // Save session token
        sessionStorage.setItem('race_role', role);
        // redirect
        if(role === 'admin') goto('/admin.html');
        else goto('/index.html');
      } else {
        const m = document.getElementById('msg');
        m.innerText = 'Incorrect password for ' + role;
      }
    });

    document.getElementById('demoBtn').addEventListener('click', ()=>{
      sessionStorage.setItem('race_role', 'viewer');
      goto('/index.html');
    });
  </script>
</body>
</html>
